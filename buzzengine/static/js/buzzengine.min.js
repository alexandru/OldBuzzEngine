(function(){var f={};var w={};var d={};function g(){var D=document.getElementById("comments");return D.getAttribute("data-domain")}function e(D){return Object.prototype.toString.call(D).match(/^\[object (.*)\]$/)[1]}function n(){return navigator.userAgent.indexOf("MSIE")!=-1}function b(){var F=-1;if(navigator.appName=="Microsoft Internet Explorer"){var D=navigator.userAgent;var E=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(E.exec(D)!=null){F=parseFloat(RegExp.$1)}}return F}function r(D){return(e(D)!="String"?D:document.getElementById(D))}function v(D){r(D).style.display="block"}function m(D){r(D).style.display="none"}function q(E){E=r(E);if(E==document){return true}if(!E){return false}if(!E.parentNode){return false}if(E.style){if(E.style.display=="none"){return false}if(E.style.visibility=="hidden"){return false}}if(window.getComputedStyle){var D=window.getComputedStyle(E,"");if(D.display=="none"){return false}if(D.visibility=="hidden"){return false}}var D=E.currentStyle;if(D){if(D.display=="none"){return false}if(D.visibility=="hidden"){return false}}return isVisible(E.parentNode)}function C(G,D,E){var F=r(G);if(F.addEventListener&&!n()){F.addEventListener(D,E,false)}else{if(F.addEventListener){F.addEventListener(D,E)}else{if(F.attachEvent){F.attachEvent("on"+D,E)}}}}function z(E,D){r(E).setAttribute("class",D)}function x(N){var G=N.name;var M=N.type;var D=N.tag;var K=r("comments");var E=D?[D]:["input","textarea","button"];for(var I=0;I<E.length;I++){tag_name=E[I];var J=K.getElementsByTagName(tag_name);if(!J){continue}for(var H=0;H<J.length;H++){var F=J[H];var L=1;if(G&&F.getAttribute("name")!=G){L=0}if(M&&F.getAttribute("type")!=M){L=0}if(L){return F}}}}function t(I,D){var G=r(I);var E=G.getElementsByTagName("*");for(var F=0;F<E.length;F++){var H=E[F];var J=H.getAttribute("class");if(J&&(J==D||J.match(/cls/))){return H}}}function i(){return BUZZENGINE_PARAMS.article_url||(window.location+"")}function j(){var D=document.getElementsByTagName("title").length?document.getElementsByTagName("title")[0].innerHTML:null;return BUZZENGINE_PARAMS.article_title||D}function h(){var F=r("comments");var E=t(F,"data");var D=t(E,"current_author");return D.innerHTML}function c(){var I=r("comments");var E=I.getElementsByTagName("form")[0];var F=new Array();var J=new Array();var H=E.getElementsByTagName("input");var K=E.getElementsByTagName("textarea");for(var G=0;G<H.length;G++){J.push(H[G])}for(var G=0;G<K.length;G++){J.push(K[G])}for(var G=0;G<J.length;G++){var D=J[G].getAttribute("name");if(!D){continue}var L=J[G].value||"";F.push(encodeURI(D)+"="+encodeURI(L))}return F.join("&")}function p(F,G,H){if(H){var E=new Date();E.setTime(E.getTime()+(H*24*60*60*1000));var D="; expires="+E.toGMTString()}else{var D=""}document.cookie=F+"="+G+D+"; path=/"}function a(E){var G=E+"=";var D=document.cookie.split(";");for(var F=0;F<D.length;F++){var H=D[F];while(H.charAt(0)==" "){H=H.substring(1,H.length)}if(H.indexOf(G)==0){return H.substring(G.length,H.length)}}return null}function B(D){p(D,"",-1)}function s(D,E){if(!d[D]){d[D]=new Array()}d[D].push(E)}function A(D){while(d[D].length>0){var E=d[D].pop();if(E){E()}}}function l(E,F){s(E,F);if(f[E]){A(E);return true}if(w[E]){return false}w[E]=true;var D=document.getElementsByTagName("head")[0];js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src",E);D.appendChild(js);js.onreadystatechange=function(){if(js.readyState=="complete"||js.readyState=="loaded"){if(!f[E]){f[E]=true;A(E)}}};js.onload=function(){if(!f[E]){f[E]=true;A(E)}};return false}function k(F){var E=F.url;var G=F.type||"GET";var J=F.success;var D=F.error;var I=F.data;function H(L){if(L.readyState==4){if(L.status==200&&J){J(L.responseText,L)}else{D(L)}}}var K=new flensed.flXHR({autoUpdatePlayer:false,instanceId:"myproxy1",xmlResponseText:false,onreadystatechange:H,loadPolicyURL:"http://"+g()+"/static/load-policy.xml"});K.open(G,E);K.send(I)}function o(M){var D=M.url;var I=M.type||"GET";var K=M.success;var J=M.error;var G=M.data;try{var L=new XMLHttpRequest()}catch(H){}var E=false;if(L&&"withCredentials" in L){L.open(I,D,true)}else{if(typeof XDomainRequest!="undefined"){L=new XDomainRequest();L.open(I,D)}else{L=null}}if(!L){if(typeof flensed=="undefined"){l("http://"+g()+"/static/js/flXHR/flXHR.js",function(){k(M)})}else{k(M)}}else{var F=function(N){return function(O){var O=n()?L:O;if(N=="load"&&(n()||O.readyState==4)&&K){K(O.responseText,O)}else{if(J){J(O)}}}};try{L.withCredentials=true}catch(H){}L.onload=function(N){F("load")(n()?N:N.target)};L.onerror=function(N){F("error")(n()?N:N.target)};L.send(G)}}function y(D){if(D){document.getElementById("comments").innerHTML=D}if(n()&&b()<8){m(document.getElementById("comments").getElementsByTagName("form")[0]);return}setTimeout(function(){x({name:"article_url"}).setAttribute("value",i());x({name:"article_title"}).setAttribute("value",j());var E=h();if(E){p("author",E,365)}var F=r("comments").getElementsByTagName("form")[0];C(F,"submit",function(G){if(n()){G.returnValue=false}else{if(G.preventDefault){G.preventDefault()}}v(t("comments","loader"));m(t("comments","button"));o({url:F.getAttribute("action"),type:"POST",data:c(),success:function(H){y(H)},error:function(H){t("comments","errornote").remove();F.innerHTML="<div class='errornote'>Something wrong happened, please try again later!</div>"+F.innerHTML}});return false})},0)}function u(){var E=a("author");E=E?encodeURI(E):null;var D="http://"+g()+"/api/comments/";D+="?article_url="+encodeURI(window.location+"");if(E){D+="&author="+encodeURI(E)}o({url:D,type:"GET",success:function(F){y(F)}})}u()})();

